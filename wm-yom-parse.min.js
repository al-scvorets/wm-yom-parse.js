!function(e,n){var r="0.2.0",t=null,a=function(e){function r(e){function n(e){return i++,T++,e}var t=o.charAt(i);if(!t)return d._EOF;if(e)return n(t);if({"\n":1,"	":1,"\b":1,"\f":1,",":1}[t])return n(d._SEP);if("/"==t)return n(),r(!0);var a={"[":d._GROUP_START,"]":d._GROUP_END,"{":d._ATTR_START,"}":d._ATTR_END,"#":d._HASH}[t];return n(a?a:t)}function a(e){t={msg:e,row:s,col:T-1}}function u(){function e(e){var n=e.split(/[:=]/,2);return{name:$.trim(n[0]),val:n[1]?$.trim(e.substr(n[0].length+1)):!0}}var n,t,u={},l="";do switch(n=r()){case d._EOF:a("Unexpected end of data"),n=null,u=null;break;case d._SEP:case d._ATTR_END:l&&(t=e(l),t.name&&(u[t.name]=t.val),l=""),d._ATTR_END==n&&(n=null);break;case d._GROUP_START:a("Unexpected '['"),n=null,u=null;break;case d._GROUP_END:a("Unexpected ']'"),n=null,u=null;break;case d._ATTR_START:a("Unexpected '{'"),n=null,u=null;break;default:l+=n}while(n);return u}function l(){var e=r();if(" "===e)return" ";if(!e.match(/[a-zA-Z_$]/))return a("Bad char in hash: "+e),n;var t=e;do e=r(!0),e.match(/[0-9a-zA-Z_$]/)?t+=e:e=null;while(e);var u={};return u[t]=!0,u}function _(e){var n={parent:e,text:"",nodes:[]};return e&&e.nodes.push(n),n}function c(){A.text=$.trim(A.text),(A.text||A.attr||A.nodes.length)&&" "!==A.hash||A.parent.nodes.pop()}var o=e.replace(/(\r\n|\r)/gm,"\n").replace(/[\\\+\-]\n/gm," "),i=0,s=1,T=1;if(t=null,!e||"string"!=typeof e)return[];var f,d={_EOF:-1,_SEP:-2,_GROUP_START:-3,_GROUP_END:-4,_ATTR_START:-5,_ATTR_END:-6,_HASH:-7},R=_(null),A=_(R);do switch(f=r()){case d._EOF:f=0;break;case d._SEP:case d._HASH:c(),A=_(A.parent),d._HASH==f&&(A.hash=l());break;case d._GROUP_START:A=_(A);break;case d._GROUP_END:c(),A=A.parent,A||(a("Unexpected ']'"),f=null);break;case d._ATTR_START:A.attr=u(),A.attr||(f=null);break;case d._ATTR_END:a("Unexpected '}'"),f=null;break;default:A.text+=f}while(f);return R};a.last_error=function(){return t},a.version=r,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=a:(e.wmYomParse=a,"function"==typeof define&&define.amd&&define("wm-yom-parse",[],function(){return a}))}(window);